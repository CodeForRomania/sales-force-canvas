<div>
<br>
<h2 id="contentTitle" class="sub-title">OAuth</h2>
<p>Canvas Apps need to provide an OAuth path for users to authenticate the app and get an access token for querying with Salesforce. Even if the Canvas app's access method is the Signed Request(like this one), an org has the option to have admins pre-authorize the app for certain profiles, or allow users to self-authourize. If the self-authorize option is chosen, then an OAuth path needs to be provided for the user. You will need to add your <span class="bold">Consumer Key</span> and your <span class="bold">OAuth Callback</span> endpoint to the <a href="https://raw.githubusercontent.com/sumanpoluri/canvas-starter-kit/master/models/consumerData.js" target+"_blanK">consumerData.js</a> file for this routine to work. The Consumer Key and  callback endpoint are associated with your Connected/Canvas app during set-up. To initiate the OAuth process, call, or assign as a listener,  <span class="bold">cnv.login()</span> from the <a href="https://github.com/sumanpoluri/canvas-starter-kit/blob/master/packageComponents/staticresources/canvas-static.js" target="_blank">canvas-static.js</a> file.<p>
<br>
<p>To test your OAuth path, make sure the app is set to allow users to self authorize (setup/Managed Apps/Connected Apps), and click logout below. This will revoke the current access token and re-initialize the authorization pop-up and take you to the OAuth page where you can re-authorize. This button triggers <span class="bold">cnv.logout(true)</span></p>
<br>
<div  class="button-wrapper">
  <button id="logout" onclick="logout()">logout</button>
</div>
</div>
<script src="/javascripts/ejs.js"></script>
<script src="/javascripts/oauth.js"></script>
